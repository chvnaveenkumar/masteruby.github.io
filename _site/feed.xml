<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
	<channel>
		<title>Masteruby</title>
		<description>Masteruby is ruby tutorials website</description>		
		<link>http://masteruby.github.io</link>
		<atom:link href="http://masteruby.github.io/feed.xml" rel="self" type="application/rss+xml" />
		
			<item>
				<title>Painless Vim&amp;#58; Everything you Want to Know about Vim</title>
				<description>&lt;p&gt;Have you tried Vim, but you found it hard to start and you just quitted it? Do you want to convince your colleague to use Vim?&lt;/p&gt;

&lt;p&gt;Until recently, you have hard time. You certainly walked through Vim help system or you found some tutorials online, but real Vim’s guide to beginners was really missing.&lt;/p&gt;

&lt;h2 id=&quot;meet-painless-vim&quot;&gt;Meet Painless Vim&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://leanpub.com/painless_vim?a=1TpbU12X52sRpKmE_tjqw0&quot;&gt;&lt;img class=&quot;book&quot; src=&quot;/images/vim.png&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Painless Vim by Nate Dickson is a new beginner’s guide to Vim. It promises to help you to get up to speed quickly. Book has 28 chapters and each chapter covers part of Vim step by step.&lt;/p&gt;

&lt;p&gt;Book is short(166 pages), but it uses it’s space perfectly.&lt;/p&gt;

&lt;p&gt;You will start with basics like navigation commands and what to put to your .vimrc and then you will move to other topics like remapping keys to your taste or tips and tricks for using insert mode.&lt;/p&gt;

&lt;p&gt;In some chapters you will find some recommendation what to do and what you should avoid. For example in chapter about mapping keys, you will find out examples which keys you should remap and which you shouldn’t.&lt;/p&gt;

&lt;h2 id=&quot;chapters-of-the-book&quot;&gt;Chapters of the Book&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;1 Get in, Get Out, Get Comfortable&lt;/li&gt;
  &lt;li&gt;2 Moving Around in Vim: Baby Steps&lt;/li&gt;
  &lt;li&gt;3 Your .vimrc File and You&lt;/li&gt;
  &lt;li&gt;4 Interlude: The Joy of a Good Cheat Sheet&lt;/li&gt;
  &lt;li&gt;5 Moving Around in Vim: Grown Up Steps&lt;/li&gt;
  &lt;li&gt;6 Operators 1: Changing Letters and Lines&lt;/li&gt;
  &lt;li&gt;7 Doing Things More Than Once&lt;/li&gt;
  &lt;li&gt;8 Moving Around in Vim: Dance Steps&lt;/li&gt;
  &lt;li&gt;9 Modes at Last&lt;/li&gt;
  &lt;li&gt;10 Plugins&lt;/li&gt;
  &lt;li&gt;11 Operators: Moving and Changing at the Same Time&lt;/li&gt;
  &lt;li&gt;12 Interlude: How to Back Off Without Giving Up&lt;/li&gt;
  &lt;li&gt;13 Registers: Clipboards as Far as the Eye Can See&lt;/li&gt;
  &lt;li&gt;14 Text Origami. :h folding&lt;/li&gt;
  &lt;li&gt;15 Searching and (More Importantly) Finding&lt;/li&gt;
  &lt;li&gt;16 Using Vim’s Help System&lt;/li&gt;
  &lt;li&gt;17 Doing Things at Vim Speed&lt;/li&gt;
  &lt;li&gt;18 Mapping Keys&lt;/li&gt;
  &lt;li&gt;19 Fancy Insert Mode Tricks&lt;/li&gt;
  &lt;li&gt;20 Vim Windows Are Not Microsoft Windows&lt;/li&gt;
  &lt;li&gt;21 Tab Pages Are Not Browser Tabs&lt;/li&gt;
  &lt;li&gt;22 Interlude: Reviewing Views&lt;/li&gt;
  &lt;li&gt;23 How Vim Thinks&lt;/li&gt;
  &lt;li&gt;24 Visual Mode Basics&lt;/li&gt;
  &lt;li&gt;25 Vim GUIs&lt;/li&gt;
  &lt;li&gt;26 Menus Everywhere&lt;/li&gt;
  &lt;li&gt;27 Literary Vim: Writing Prose in Vim&lt;/li&gt;
  &lt;li&gt;28 Conclusion&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Painless Vim is a great beginners guide that I can recommend you. There was never been step by step guide to Vim like this. If you’ve tried Vim in the past, give it another chance. That’s book is really worth of it.&lt;/p&gt;

&lt;p&gt;You can buy the book on &lt;a href=&quot;https://leanpub.com/painless_vim?a=1TpbU12X52sRpKmE_tjqw0&quot;&gt;Leanpub&lt;/a&gt;, where you can get book in three formats: PDF, EPUB and MOBI and you will get access to future updates of the book.&lt;/p&gt;

</description>
				<pubDate>Wed, 01 Oct 2014 09:50:27 +0200</pubDate>
				<link>http://masteruby.github.io/2014/10/01/pvim.html</link>
				<guid isPermaLink="true">http://masteruby.github.io/2014/10/01/pvim.html</guid>
			</item>
		
			<item>
				<title>Painless Vim&amp;#58; Everything you Want to Know about Vim</title>
				<description>&lt;p&gt;Have you tried Vim, but you found it hard to start and you just quitted it? Do you want to convince your colleague to use Vim?&lt;/p&gt;

&lt;p&gt;Until recently, you have hard time. You certainly walked through Vim help system or you found some tutorials online, but real Vim’s guide to beginners was really missing.&lt;/p&gt;

&lt;h2 id=&quot;meet-painless-vim&quot;&gt;Meet Painless Vim&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://leanpub.com/painless_vim?a=1TpbU12X52sRpKmE_tjqw0&quot;&gt;&lt;img class=&quot;book&quot; src=&quot;/images/vim.png&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Painless Vim by Nate Dickson is a new beginner’s guide to Vim. It promises to help you to get up to speed quickly. Book has 28 chapters and each chapter covers part of Vim step by step.&lt;/p&gt;

&lt;p&gt;Book is short(166 pages), but it uses it’s space perfectly.&lt;/p&gt;

&lt;p&gt;You will start with basics like navigation commands and what to put to your .vimrc and then you will move to other topics like remapping keys to your taste or tips and tricks for using insert mode.&lt;/p&gt;

&lt;p&gt;In some chapters you will find some recommendation what to do and what you should avoid. For example in chapter about mapping keys, you will find out examples which keys you should remap and which you shouldn’t.&lt;/p&gt;

&lt;h2 id=&quot;chapters-of-the-book&quot;&gt;Chapters of the Book&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;1 Get in, Get Out, Get Comfortable&lt;/li&gt;
  &lt;li&gt;2 Moving Around in Vim: Baby Steps&lt;/li&gt;
  &lt;li&gt;3 Your .vimrc File and You&lt;/li&gt;
  &lt;li&gt;4 Interlude: The Joy of a Good Cheat Sheet&lt;/li&gt;
  &lt;li&gt;5 Moving Around in Vim: Grown Up Steps&lt;/li&gt;
  &lt;li&gt;6 Operators 1: Changing Letters and Lines&lt;/li&gt;
  &lt;li&gt;7 Doing Things More Than Once&lt;/li&gt;
  &lt;li&gt;8 Moving Around in Vim: Dance Steps&lt;/li&gt;
  &lt;li&gt;9 Modes at Last&lt;/li&gt;
  &lt;li&gt;10 Plugins&lt;/li&gt;
  &lt;li&gt;11 Operators: Moving and Changing at the Same Time&lt;/li&gt;
  &lt;li&gt;12 Interlude: How to Back Off Without Giving Up&lt;/li&gt;
  &lt;li&gt;13 Registers: Clipboards as Far as the Eye Can See&lt;/li&gt;
  &lt;li&gt;14 Text Origami. :h folding&lt;/li&gt;
  &lt;li&gt;15 Searching and (More Importantly) Finding&lt;/li&gt;
  &lt;li&gt;16 Using Vim’s Help System&lt;/li&gt;
  &lt;li&gt;17 Doing Things at Vim Speed&lt;/li&gt;
  &lt;li&gt;18 Mapping Keys&lt;/li&gt;
  &lt;li&gt;19 Fancy Insert Mode Tricks&lt;/li&gt;
  &lt;li&gt;20 Vim Windows Are Not Microsoft Windows&lt;/li&gt;
  &lt;li&gt;21 Tab Pages Are Not Browser Tabs&lt;/li&gt;
  &lt;li&gt;22 Interlude: Reviewing Views&lt;/li&gt;
  &lt;li&gt;23 How Vim Thinks&lt;/li&gt;
  &lt;li&gt;24 Visual Mode Basics&lt;/li&gt;
  &lt;li&gt;25 Vim GUIs&lt;/li&gt;
  &lt;li&gt;26 Menus Everywhere&lt;/li&gt;
  &lt;li&gt;27 Literary Vim: Writing Prose in Vim&lt;/li&gt;
  &lt;li&gt;28 Conclusion&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Painless Vim is a great beginners guide that I can recommend you. There was never been step by step guide to Vim like this. If you’ve tried Vim in the past, give it another chance. That’s book is really worth of it.&lt;/p&gt;

&lt;p&gt;You can buy the book on &lt;a href=&quot;https://leanpub.com/painless_vim?a=1TpbU12X52sRpKmE_tjqw0&quot;&gt;Leanpub&lt;/a&gt;, where you can get book in three formats: PDF, EPUB and MOBI and you will get access to future updates of the book.&lt;/p&gt;

</description>
				<pubDate>Wed, 01 Oct 2014 00:00:00 +0200</pubDate>
				<link>http://masteruby.github.io/productivity-booster/2014/10/01/painless-vim-book-review.html</link>
				<guid isPermaLink="true">http://masteruby.github.io/productivity-booster/2014/10/01/painless-vim-book-review.html</guid>
			</item>
		
			<item>
				<title>How to Add User Karma</title>
				<description>&lt;p&gt;A week ago you’ve learnt &lt;a href=&quot;/weekly-rails/2014/08/05/how-to-add-voting-to-rails-app.html&quot;&gt;how to add voting&lt;/a&gt;. Acts_as_votable is great, but it doesn’t provide user karma. This time you will learn how to add user karma functionality to your app.&lt;/p&gt;

&lt;h2 id=&quot;what-do-you-need&quot;&gt;What do you need&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Links controller and model created&lt;/li&gt;
  &lt;li&gt;User authentication created&lt;/li&gt;
  &lt;li&gt;Acts_as_votable gem&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;adding-karma-column-to-users-table&quot;&gt;Adding karma column to users table&lt;/h2&gt;

&lt;p&gt;To use karma for user, we need to generate new migration. Create new migration like this:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;rails generate migration AddKarmaToUsers&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Let’s edit it now.&lt;/p&gt;

&lt;h4 id=&quot;dbmigrateaddkarmatousersrb&quot;&gt;db/migrate/add_karma_to_users.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AddKarmaToUsers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Migration&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;change&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;add_column&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:karma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:integer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:default&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This code will add new column to users table with name karma. We’ve choosed basic type integer and set default value to 0.&lt;/p&gt;

&lt;p&gt;Let’s migrate it:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;rake db:migrate&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;adding-user-as-voter&quot;&gt;Adding user as voter&lt;/h2&gt;

&lt;p&gt;Before we’ll use user’s karma we need to add another acts_as_votable helper. I’ll explain why soon. &lt;/p&gt;

&lt;h4 id=&quot;appmodelsuserrb&quot;&gt;app/models/user.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;
  
  &lt;span class=&quot;n&quot;&gt;acts_as_voter&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;has_many&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:links&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;creating-methods-for-increasing-and-decreasing-users-karma&quot;&gt;Creating methods for increasing and decreasing user’s karma&lt;/h2&gt;

&lt;p&gt;For better readability we’ll use separate methods for increasing and decreasing user’s karma in user’s model.&lt;/p&gt;

&lt;h4 id=&quot;appmodelsuserrb-1&quot;&gt;app/models/user.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;has_many&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:links&lt;/span&gt; 
  &lt;span class=&quot;n&quot;&gt;acts_as_voter&lt;/span&gt;
  
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;increase_karma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;update_attribute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:karma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;karma&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Here we’ve set method that will update user’s karma from default to 1. You will use similar for decreasing.&lt;/p&gt;

&lt;h4 id=&quot;appmodelsuserrb-2&quot;&gt;app/models/user.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;decrease_karma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;update_attribute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:karma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;karma&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;We’ve added methods to models, let’s go to controllers.&lt;/p&gt;

&lt;h2 id=&quot;adding-user-karma-to-controller&quot;&gt;Adding user karma to controller&lt;/h2&gt;

&lt;p&gt;Now we can use user’s methods in our links_controller&lt;/p&gt;

&lt;h4 id=&quot;appcontrollerslinkscontrollerrb&quot;&gt;app/controllers/links_controller.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;upvote&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current_user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;voted_for?&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;redirect_to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;links_path&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;upvote_by&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current_user&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;increase_karma&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;redirect_to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;links_path&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Let’s check out what we’ve done.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current_user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;voted_for?&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;redirect_to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;links_path&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;First we’ll find our link. Then we’ll checkout if current signed user has already voted for link, that’s why we’ve used acts_as_voter helper in our User model. If he has we’ll just redirect to path with all of links.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;upvote_by&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current_user&lt;/span&gt;
&lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;increase_karma&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;redirect_to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;links_path&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;First we’ll upvote link using acts_as_votable as in last time. Then we’ll increase karma to user that have created link.&lt;/p&gt;

&lt;p&gt;Don’t forget to add similar code to downvote action too.&lt;/p&gt;

&lt;h4 id=&quot;appcontrollerslinkscontrollerrb-1&quot;&gt;app/controllers/links_controller.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;downvote&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current_user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;voted_for?&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;redirect_to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;links_path&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;downvote_by&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current_user&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decrease_karma&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;redirect_to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root_path&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;showing-users-karma&quot;&gt;Showing user’s karma&lt;/h2&gt;

&lt;p&gt;Now you can show user’s karma in your view too. Let’s assume you have got show action in controller like this:&lt;/p&gt;

&lt;h4 id=&quot;appcontrollersuserscontrollerrb&quot;&gt;app/controllers/users_controller.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;show&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now you can easy display user’s karmain your view like this:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;= @user.karma&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;That’s all for now, if you like it, don’t forget to share this article with your favorite social network.&lt;/p&gt;

</description>
				<pubDate>Tue, 12 Aug 2014 15:28:01 +0200</pubDate>
				<link>http://masteruby.github.io/2014/08/12/karma.html</link>
				<guid isPermaLink="true">http://masteruby.github.io/2014/08/12/karma.html</guid>
			</item>
		
			<item>
				<title>How to Add User Karma in Rails</title>
				<description>&lt;p&gt;A week ago you’ve learned &lt;a href=&quot;/weekly-rails/2014/08/05/how-to-add-voting-to-rails-app.html&quot;&gt;how to add voting&lt;/a&gt;. Acts_as_votable is great, but it doesn’t provide user karma. This time you will learn how to add user karma functionality to your app.&lt;/p&gt;

&lt;h2 id=&quot;what-do-you-need&quot;&gt;What do you need&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Links controller and model created&lt;/li&gt;
  &lt;li&gt;User authentication created&lt;/li&gt;
  &lt;li&gt;Acts_as_votable gem&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;adding-karma-column-to-users-table&quot;&gt;Adding karma column to users table&lt;/h2&gt;

&lt;p&gt;To use karma for user, we need to generate new migration. Create new migration like this:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;rails generate migration AddKarmaToUsers&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Let’s edit it now.&lt;/p&gt;

&lt;h4 id=&quot;dbmigrateaddkarmatousersrb&quot;&gt;db/migrate/add_karma_to_users.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AddKarmaToUsers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Migration&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;change&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;add_column&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:karma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:integer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:default&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This code will add new column to users table with name karma. We’ve choosed basic type integer and set default value to 0.&lt;/p&gt;

&lt;p&gt;Let’s migrate it:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;rake db:migrate&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;adding-user-as-voter&quot;&gt;Adding user as voter&lt;/h2&gt;

&lt;p&gt;Before we’ll use user’s karma we need to add another acts_as_votable helper. I’ll explain why soon. &lt;/p&gt;

&lt;h4 id=&quot;appmodelsuserrb&quot;&gt;app/models/user.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;
  
  &lt;span class=&quot;n&quot;&gt;acts_as_voter&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;has_many&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:links&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;creating-methods-for-increasing-and-decreasing-users-karma&quot;&gt;Creating methods for increasing and decreasing user’s karma&lt;/h2&gt;

&lt;p&gt;For better readability we’ll use separate methods for increasing and decreasing user’s karma in user’s model.&lt;/p&gt;

&lt;h4 id=&quot;appmodelsuserrb-1&quot;&gt;app/models/user.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;has_many&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:links&lt;/span&gt; 
  &lt;span class=&quot;n&quot;&gt;acts_as_voter&lt;/span&gt;
  
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;increase_karma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;update_attribute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:karma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;karma&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Here we’ve set method that will update user’s karma from default to 1. You will use similar for decreasing.&lt;/p&gt;

&lt;h4 id=&quot;appmodelsuserrb-2&quot;&gt;app/models/user.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;decrease_karma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;update_attribute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:karma&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;karma&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;We’ve added methods to models, let’s go to controllers.&lt;/p&gt;

&lt;h2 id=&quot;adding-user-karma-to-controller&quot;&gt;Adding user karma to controller&lt;/h2&gt;

&lt;p&gt;Now we can use user’s methods in our links_controller&lt;/p&gt;

&lt;h4 id=&quot;appcontrollerslinkscontrollerrb&quot;&gt;app/controllers/links_controller.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;upvote&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current_user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;voted_for?&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;redirect_to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;links_path&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;upvote_by&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current_user&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;increase_karma&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;redirect_to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;links_path&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Let’s check out what we’ve done.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current_user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;voted_for?&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;redirect_to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;links_path&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;First we’ll find our link. Then we’ll checkout if current signed user has already voted for link, that’s why we’ve used acts_as_voter helper in our User model. If he has we’ll just redirect to path with all of links.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;upvote_by&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current_user&lt;/span&gt;
&lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;increase_karma&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;redirect_to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;links_path&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;First we’ll upvote link using acts_as_votable as in last time. Then we’ll increase karma to user that have created link.&lt;/p&gt;

&lt;p&gt;Don’t forget to add similar code to downvote action too.&lt;/p&gt;

&lt;h4 id=&quot;appcontrollerslinkscontrollerrb-1&quot;&gt;app/controllers/links_controller.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;downvote&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current_user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;voted_for?&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;redirect_to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;links_path&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;downvote_by&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current_user&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decrease_karma&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;redirect_to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root_path&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;showing-users-karma&quot;&gt;Showing user’s karma&lt;/h2&gt;

&lt;p&gt;Now you can show user’s karma in your view too. Let’s assume you have got show action in controller like this:&lt;/p&gt;

&lt;h4 id=&quot;appcontrollersuserscontrollerrb&quot;&gt;app/controllers/users_controller.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;show&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now you can easy display user’s karmain your view like this:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;= @user.karma&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;That’s all for now, if you like it, don’t forget to share this article with your favorite social network.&lt;/p&gt;

</description>
				<pubDate>Tue, 12 Aug 2014 00:00:00 +0200</pubDate>
				<link>http://masteruby.github.io/weekly-rails/2014/08/12/how-to-add-user-karma-to-rails-app.html</link>
				<guid isPermaLink="true">http://masteruby.github.io/weekly-rails/2014/08/12/how-to-add-user-karma-to-rails-app.html</guid>
			</item>
		
			<item>
				<title>How to Add Comments to Rails App with Commontator</title>
				<description>&lt;p&gt;Last time we’ve added &lt;a href=&quot;/weekly-rails/2014/08/05/how-to-add-voting-to-rails-app.html&quot;&gt;voting&lt;/a&gt;. This time I will show you how easy can be adding comments with Commontator.&lt;/p&gt;

&lt;h2 id=&quot;why-to-use-commontator&quot;&gt;Why to Use Commontator&lt;/h2&gt;

&lt;p&gt;Commontator has following advantages:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;It includes comments count&lt;/li&gt;
  &lt;li&gt;Is easy to configure&lt;/li&gt;
  &lt;li&gt;It includes creating, editing and deleting comments&lt;/li&gt;
  &lt;li&gt;You can add voting with acts_as_votable&lt;/li&gt;
  &lt;li&gt;Is customizable &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;how-to-install-commontator&quot;&gt;How to Install Commontator&lt;/h2&gt;

&lt;p&gt;First thing we need to do is to add commontator gem to Gemfile&lt;/p&gt;

&lt;h4 id=&quot;gemfile&quot;&gt;Gemfile&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;commontator&amp;#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Then install it with Bundler&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;bundle&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;install&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now you can create Commontator configuration and migrations&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;rake&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;commontator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;install&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And move migrations to database&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;rake db:migrate&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;how-to-use-commontator-in-our-models&quot;&gt;How to Use Commontator in Our Models&lt;/h2&gt;

&lt;p&gt;Let’s assume you’ve got two models, first is &lt;strong&gt;User&lt;/strong&gt; and second is a &lt;strong&gt;Link&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;User should be able to post comments, so add this line to your User model.&lt;/p&gt;

&lt;h4 id=&quot;appmodelsuserrb&quot;&gt;app/models/user.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;
  
  &lt;span class=&quot;n&quot;&gt;acts_as_commontator&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;We want to show comments under each link, so add acts_as_commontable helper to Link model.&lt;/p&gt;

&lt;h4 id=&quot;appmodelslinkrb&quot;&gt;app/models/link.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Link&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;acts_as_commontable&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;adding-comments-route&quot;&gt;Adding Comment’s route&lt;/h2&gt;

&lt;p&gt;Next thing we need to is to add commontator’s route.&lt;/p&gt;

&lt;h4 id=&quot;configroutesrb&quot;&gt;config/routes.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;mount&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Commontator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Engine&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/commontator&amp;#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;showing-comments&quot;&gt;Showing Comments&lt;/h2&gt;

&lt;p&gt;So we’ve added commontator’s helpers to our model, so we can add commontator’s thread to our views. Let’s assume we’ve got index action in links_controller.&lt;/p&gt;

&lt;h4 id=&quot;appcontrollerslinkscontrollerrb&quot;&gt;app/controllers/links_controller.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LinksController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ApplicationController&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;index&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@links&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;all&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Let’s add commontator’s thread to our views.&lt;/p&gt;

&lt;h4 id=&quot;appviewslinksindexhtmlslim&quot;&gt;app/views/links/index.html.slim&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;- @links.each do |link|
  = commontator_thread(link)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now you should see comments count:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/comments-count.png&quot; alt=&quot;how to add comments count in Rails&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Click on show comments, you should see new comment link.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/new-comment.png&quot; alt=&quot;how to add new comment in Rails&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Fill in new comment form and look at the comment that we’ve created:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/showing-comment.png&quot; alt=&quot;how to show comment in Rails&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Looks nice isn’t it?&lt;/p&gt;

&lt;h2 id=&quot;replacing-anonymous-with-username&quot;&gt;Replacing “Anonymous” with username&lt;/h2&gt;

&lt;p&gt;You certainly noticed that when you’ve created comment, it shows Anonymous instead of username.&lt;/p&gt;

&lt;p&gt;Let’s fix that. Find this line in commontator initializer&lt;/p&gt;

&lt;h4 id=&quot;configinitializerscommontatorrb&quot;&gt;config/initializers/commontator.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user_name_proc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;I18n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;commontator.anonymous&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now if you have column username in users table replace previous line with following:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user_name_proc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;username&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now if you look at your comments in a browser you should see user’s name instead of Anonymous.&lt;/p&gt;

&lt;h2 id=&quot;customization&quot;&gt;Customization&lt;/h2&gt;

&lt;p&gt;Let’s assume you want to customize views. Run this command:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;rake commontator:copy:views&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;You should see that commontator folder was created in our views folder.&lt;/p&gt;

&lt;p&gt;That’s all for now. I hope that you liked my tutorial. If you don’t understand anything about post, feel free to ask in discussion. And if you like it, share it with your favorite social network.&lt;/p&gt;

</description>
				<pubDate>Fri, 08 Aug 2014 20:03:55 +0200</pubDate>
				<link>http://masteruby.github.io/2014/08/08/comments.html</link>
				<guid isPermaLink="true">http://masteruby.github.io/2014/08/08/comments.html</guid>
			</item>
		
			<item>
				<title>How to Add Comments to Rails App with Commontator</title>
				<description>&lt;p&gt;Last time we’ve added &lt;a href=&quot;/weekly-rails/2014/08/05/how-to-add-voting-to-rails-app.html&quot;&gt;voting&lt;/a&gt;. This time I will show you how easy can be adding comments with Commontator.&lt;/p&gt;

&lt;h2 id=&quot;why-to-use-commontator&quot;&gt;Why to Use Commontator&lt;/h2&gt;

&lt;p&gt;Commontator has following advantages:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;It includes comments count&lt;/li&gt;
  &lt;li&gt;Is easy to configure&lt;/li&gt;
  &lt;li&gt;It includes creating, editing and deleting comments&lt;/li&gt;
  &lt;li&gt;You can add voting with acts_as_votable&lt;/li&gt;
  &lt;li&gt;Is customizable &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;how-to-install-commontator&quot;&gt;How to Install Commontator&lt;/h2&gt;

&lt;p&gt;First thing we need to do is to add commontator gem to Gemfile&lt;/p&gt;

&lt;h4 id=&quot;gemfile&quot;&gt;Gemfile&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;commontator&amp;#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Then install it with Bundler&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;bundle&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;install&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now you can create Commontator configuration and migrations&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;rake&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;commontator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;install&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And move migrations to database&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;rake db:migrate&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;how-to-use-commontator-in-our-models&quot;&gt;How to Use Commontator in Our Models&lt;/h2&gt;

&lt;p&gt;Let’s assume you’ve got two models, first is &lt;strong&gt;User&lt;/strong&gt; and second is a &lt;strong&gt;Link&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;User should be able to post comments, so add this line to your User model.&lt;/p&gt;

&lt;h4 id=&quot;appmodelsuserrb&quot;&gt;app/models/user.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;
  
  &lt;span class=&quot;n&quot;&gt;acts_as_commontator&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;We want to show comments under each link, so add acts_as_commontable helper to Link model.&lt;/p&gt;

&lt;h4 id=&quot;appmodelslinkrb&quot;&gt;app/models/link.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Link&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;acts_as_commontable&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;adding-comments-route&quot;&gt;Adding Comment’s route&lt;/h2&gt;

&lt;p&gt;Next thing we need to is to add commontator’s route.&lt;/p&gt;

&lt;h4 id=&quot;configroutesrb&quot;&gt;config/routes.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;mount&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Commontator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Engine&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/commontator&amp;#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;showing-comments&quot;&gt;Showing Comments&lt;/h2&gt;

&lt;p&gt;So we’ve added commontator’s helpers to our model, so we can add commontator’s thread to our views. Let’s assume we’ve got index action in links_controller.&lt;/p&gt;

&lt;h4 id=&quot;appcontrollerslinkscontrollerrb&quot;&gt;app/controllers/links_controller.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LinksController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ApplicationController&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;index&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@links&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;all&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Let’s add commontator’s thread to our views.&lt;/p&gt;

&lt;h4 id=&quot;appviewslinksindexhtmlslim&quot;&gt;app/views/links/index.html.slim&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;- @links.each do |link|
  = commontator_thread(link)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now you should see comments count:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/comments-count.png&quot; alt=&quot;how to add comments count in Rails&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Click on show comments, you should see new comment link.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/new-comment.png&quot; alt=&quot;how to add new comment in Rails&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Fill in new comment form and look at the comment that we’ve created:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/showing-comment.png&quot; alt=&quot;how to show comment in Rails&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Looks nice isn’t it?&lt;/p&gt;

&lt;h2 id=&quot;replacing-anonymous-with-username&quot;&gt;Replacing “Anonymous” with username&lt;/h2&gt;

&lt;p&gt;You certainly noticed that when you’ve created comment, it shows Anonymous instead of username.&lt;/p&gt;

&lt;p&gt;Let’s fix that. Find this line in commontator initializer&lt;/p&gt;

&lt;h4 id=&quot;configinitializerscommontatorrb&quot;&gt;config/initializers/commontator.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user_name_proc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;I18n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;commontator.anonymous&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now if you have column username in users table replace previous line with following:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user_name_proc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;username&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now if you look at your comments in a browser you should see user’s name instead of Anonymous.&lt;/p&gt;

&lt;h2 id=&quot;customization&quot;&gt;Customization&lt;/h2&gt;

&lt;p&gt;Let’s assume you want to customize views. Run this command:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;rake commontator:copy:views&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;You should see that commontator folder was created in our views folder.&lt;/p&gt;

&lt;p&gt;That’s all for now. I hope that you liked my tutorial. If you don’t understand anything about post, feel free to ask in discussion. And if you like it, share it with your favorite social network.&lt;/p&gt;

</description>
				<pubDate>Fri, 08 Aug 2014 00:00:00 +0200</pubDate>
				<link>http://masteruby.github.io/weekly-rails/2014/08/08/how-to-add-comments-to-rails-app.html</link>
				<guid isPermaLink="true">http://masteruby.github.io/weekly-rails/2014/08/08/how-to-add-comments-to-rails-app.html</guid>
			</item>
		
			<item>
				<title>How to Add Voting to Rails App</title>
				<description>&lt;p&gt;In this post I want to show to add upvotes and dowvotes using &lt;strong&gt;acts_as votable&lt;/strong&gt; gem.&lt;/p&gt;

&lt;h2 id=&quot;what-do-you-need&quot;&gt;What do You Need&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Basic Authentication with current_user helper(Devise or something else)&lt;/li&gt;
  &lt;li&gt;One model with name &lt;strong&gt;Link&lt;/strong&gt; and controller links&lt;/li&gt;
  &lt;li&gt;acts_as_votable gem installed&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;how-to-setup-actsasvotable&quot;&gt;How to setup acts_as_votable&lt;/h2&gt;

&lt;p&gt;Add gem acts_as_votable to your Gemfile.&lt;/p&gt;

&lt;h4 id=&quot;gemfile&quot;&gt;Gemfile&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;acts_as_votable&amp;#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And install it with bundle&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;bundle install&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now generate acts_as_votable migration&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;rails generate acts_as_votable:migration&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And migrate to database&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;rake db:migrate&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now we’re done with preparation let’s add upvote action.&lt;/p&gt;

&lt;h2 id=&quot;adding-upvotes&quot;&gt;Adding upvotes&lt;/h2&gt;

&lt;p&gt;First thing we need to is to add acts_as_votable helper to our model.&lt;/p&gt;

&lt;h4 id=&quot;appmodelslinkrb&quot;&gt;app/models/link.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Link&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;acts_as_votable&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Helper will provide useful methods like this:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;upvote_by&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Add&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upvote&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current_user&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;get_dislikes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Count&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;all&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;downvotes&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;get_likes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Count&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;all&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upvotes&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;You can checkout all methods at acts_as_votable documentation.&lt;/p&gt;

&lt;p&gt;So now when we know how acts_as_votable can helps us, let’s add upvoting to our controller.&lt;/p&gt;

&lt;h4 id=&quot;appcontrollerslinkscontrollerrb&quot;&gt;app/controllers/links_controller.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;upvote&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;upvote_by&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current_user&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;redirect_to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;links_path&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h4 id=&quot;configroutesrb&quot;&gt;config/routes.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;resources&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:links&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;member&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;put&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;like&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;links#upvote&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;put&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;dislike&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;links#downvote&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Here we’ve added two routes, one for upvoting and another for downvoting that will update current like and dislikes size in votes table. &lt;/p&gt;

&lt;p&gt;Now we need to add upvote route to our root path.&lt;/p&gt;

&lt;h4 id=&quot;appviewslinksindexhtmlslim&quot;&gt;app/views/links/index.html.slim&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;- @links.each do |link|
  = link_to &amp;quot;upvote&amp;quot;, like_link_path(link), method: :put&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;If you click on link, and checkout upvotes size like this in console:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;@link &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Link.find&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
@link.get_upvotes.size &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt; 0&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;You certainly noticed that nothing will happen. Of course because voting only counts when we’re signed in. Try to signin and now click on link. Now if you checkout in console, everything should work.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;@link &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Link.find&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
@link.get_upvotes.size &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt; 1&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;adding-downvoting&quot;&gt;Adding downvoting&lt;/h2&gt;

&lt;p&gt;Adding downvoting to rails app is reversed process to upvoting, so instead of &lt;strong&gt;upvote_by&lt;/strong&gt; you will add &lt;strong&gt;downvote_by&lt;/strong&gt;&lt;/p&gt;

&lt;h4 id=&quot;appcontrollerslinkscontrollerrb-1&quot;&gt;app/controllers/links_controller.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;downvote&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@link&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;downvote_by&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current_user&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;redirect_to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;links_path&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Add path to links path. &lt;/p&gt;

&lt;h4 id=&quot;appviewslinksindexhtmlslim-1&quot;&gt;app/views/links/index.html.slim&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;= link_to &amp;quot;downvote&amp;quot;, dislike_link_path(link), method: :put&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;showing-links-score&quot;&gt;Showing link’s score&lt;/h2&gt;

&lt;p&gt;Next thing we need to is to add link’s score. Adding score is easy, thanks to methods get_upvotes.size and get_downvotes.size we can just add score method to our model.&lt;/p&gt;

&lt;h4 id=&quot;appmodelslinkrb-1&quot;&gt;app/models/link.rb&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;score&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_upvotes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_downvotes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And this to your view file&lt;/p&gt;

&lt;h4 id=&quot;appviewslinksindexhtmlslim-2&quot;&gt;app/views/links/index.html.slim&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;= link.score&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now if you click on link, you should see that our score is automatically updated by downvotes and upvotes.&lt;/p&gt;

&lt;p&gt;That’s all for now, if you don’t understand anything, feel free to ask in discussion. &lt;/p&gt;
</description>
				<pubDate>Tue, 05 Aug 2014 00:00:00 +0200</pubDate>
				<link>http://masteruby.github.io/weekly-rails/2014/08/05/how-to-add-voting-to-rails-app.html</link>
				<guid isPermaLink="true">http://masteruby.github.io/weekly-rails/2014/08/05/how-to-add-voting-to-rails-app.html</guid>
			</item>
		
			<item>
				<title>Tags</title>
				<description>&lt;ul&gt;
  &lt;li&gt;rails generate model Post title:string body:post&lt;/li&gt;
  &lt;li&gt;gem ‘acts-as-taggable-on’&lt;/li&gt;
  &lt;li&gt;bundle install&lt;/li&gt;
  &lt;li&gt;rake acts_as_taggable_on_engine:install:migrations&lt;/li&gt;
  &lt;li&gt;rake db:migrate&lt;/li&gt;
  &lt;li&gt;acts_as_taggable &lt;em&gt;*to Post&lt;/em&gt; &lt;/li&gt;
&lt;/ul&gt;
</description>
				<pubDate>Sun, 03 Aug 2014 16:22:48 +0200</pubDate>
				<link>http://masteruby.github.io/2014/08/03/tags.html</link>
				<guid isPermaLink="true">http://masteruby.github.io/2014/08/03/tags.html</guid>
			</item>
		
			<item>
				<title>How to Run Tests in Vim</title>
				<description>&lt;p&gt;Last time I’ve show you some &lt;a href=&quot;&quot;&gt;vim plugins for ruby&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This time I want to show you how and why you should run your tests inside Vim. We’ll use following Vim plugins in this tutorial:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;vim-rspec&lt;/li&gt;
  &lt;li&gt;vim-dispatch&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;why-to-run-tests-inside-vim&quot;&gt;Why to Run Tests inside Vim&lt;/h2&gt;

&lt;h2 id=&quot;running-tests-with-rspec&quot;&gt;Running tests with Rspec&lt;/h2&gt;

&lt;p&gt;Running test with vim-rspec is reallyeasy. First let’s add some mapping to our .vimrc&lt;/p&gt;

&lt;h3 id=&quot;configuring-rspec&quot;&gt;Configuring Rspec&lt;/h3&gt;

&lt;p&gt;For easy using it’s better to use following vim-mappings in vim-rspec.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;map &amp;lt;Leader&amp;gt;t :call RunCurrentSpecFile&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;&amp;lt;CR&amp;gt;
map &amp;lt;Leader&amp;gt;a :call RunAllSpecs&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;&amp;lt;CR&amp;gt;
map &amp;lt;Leader&amp;gt;s :call RunNearestSpec&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;&amp;lt;CR&amp;gt;
map &amp;lt;Leader&amp;gt;l :call RunLastSpec&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;&amp;lt;CR&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Maybe you wonder what’s **&lt;leader&gt;** in .vimrc. Leader is default key, default **\**. So we&#39;ve set .vimrc, so to instead running long functions in command mode in Vim, we&#39;ve use simple&lt;/leader&gt;&lt;/p&gt;

&lt;h3 id=&quot;running-current-spec-file-with-vim-rspec&quot;&gt;Running current spec file with Vim-Rspec&lt;/h3&gt;

&lt;p&gt;Let’s assume you’ve created feature spec, with name &lt;strong&gt;users&lt;/strong&gt; and you wantto run only this spec right now. Before vim-rspec you needed to switch tmux session to run tests or open up new terminal window, not anymore&lt;/p&gt;

&lt;p&gt;So to run current spec, just run:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And vim-rspec will take work running rspec
### Running all specs&lt;/p&gt;

&lt;h3 id=&quot;running-nearest-spec&quot;&gt;Running nearest spec&lt;/h3&gt;

&lt;h3 id=&quot;running-last-spec&quot;&gt;Running last spec&lt;/h3&gt;

&lt;h2 id=&quot;using-dispatch-to-run-tests&quot;&gt;Using Dispatch to Run tests&lt;/h2&gt;
</description>
				<pubDate>Sun, 03 Aug 2014 08:08:14 +0200</pubDate>
				<link>http://masteruby.github.io/2014/08/03/tests.html</link>
				<guid isPermaLink="true">http://masteruby.github.io/2014/08/03/tests.html</guid>
			</item>
		
			<item>
				<title>Vim4rails</title>
				<description>&lt;p&gt;If you’re Rails developer, you maybe thinking how to use Vim with Rails.&lt;/p&gt;

&lt;p&gt;In this guide I want to present usingsome tasks. &lt;/p&gt;

&lt;h2 id=&quot;running-rails-server-in-background&quot;&gt;1. Running Rails Server in Background&lt;/h2&gt;

&lt;p&gt;First task we’ll cover how to use Rails Server, but still won’t leave Vim&lt;/p&gt;

&lt;h2 id=&quot;running-multiple-files-in-terminal-window&quot;&gt;2. Running Multiple Files in Terminal Window&lt;/h2&gt;

&lt;h2 id=&quot;running-tests-inside-vim&quot;&gt;3. Running Tests Inside Vim&lt;/h2&gt;

&lt;h2 id=&quot;editing-controllers-models-and-views-is-easier-with-vim&quot;&gt;4. Editing controllers, models and views is easier with Vim&lt;/h2&gt;

&lt;h2 id=&quot;generators-using-vim&quot;&gt;5. Generators using Vim&lt;/h2&gt;

&lt;h2 id=&quot;searching-for-files-with-ctrlp&quot;&gt;6. Searching for files with CTRLp&lt;/h2&gt;

&lt;h2 id=&quot;section&quot;&gt;7.&lt;/h2&gt;
</description>
				<pubDate>Wed, 30 Jul 2014 19:25:03 +0200</pubDate>
				<link>http://masteruby.github.io/2014/07/30/vim4rails.html</link>
				<guid isPermaLink="true">http://masteruby.github.io/2014/07/30/vim4rails.html</guid>
			</item>
		
	</channel>
</rss>
